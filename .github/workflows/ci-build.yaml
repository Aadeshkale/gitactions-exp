on:
  push:
    branches:
      - main
env:
  current_branch: ${{  github.ref }} 
  job_id: ${{ github.run_number }}
  sha: ${{ github.sha }}
  
jobs:
  build:
    name: Build Image 
    runs-on: ubuntu-latest  
    steps:
    - uses: actions/checkout@v3
    - name: git-checkout
      run: |
        echo "git-checkout done"

    - name: create a custom tag 
      run: |
        export IMG_TAG = "$sha" | cut -c1-6
        echo "$IMG_TAG"
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v3
    # - name: Build and push
    #   uses: docker/build-push-action@v5
    #   with:
    #     push: false
    #     tags: welcome-app:latest, welcome-app:${{ env.sha }}